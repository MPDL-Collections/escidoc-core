<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:cxf="http://cxf.apache.org/core"
       xmlns:http-conf="http://cxf.apache.org/transports/http/configuration"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util-3.0.xsd
        http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
        http://cxf.apache.org/transports/http/configuration
        http://cxf.apache.org/schemas/configuration/http-conf.xsd"
       default-lazy-init="false">

  <import resource="classpath:META-INF/cxf/cxf.xml"/>
  <import resource="classpath:META-INF/cxf/cxf-servlet.xml"/>

  <cxf:bus>
    <cxf:features>
      <ref bean="loggingFeature"/>
    </cxf:features>
  </cxf:bus>

  <http-conf:conduit name="*.http-conduit">
    <http-conf:client AutoRedirect="true"/>
  </http-conf:conduit>

  <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
      <list>
        <value>file:///${ESCIDOC_HOME}/conf/escidoc-core.properties</value>
        <value>file:///${ESCIDOC_HOME}/conf/escidoc-core.custom.properties</value>
      </list>
    </property>
    <property name="ignoreResourceNotFound" value="true"/>
  </bean>

  <bean id="compressGZIPFeature" class="org.escidoc.core.util.html.internal.EscidocGzipFeature">
    <property name="threshold">
      <value>0</value>
    </property>
  </bean>

  <bean id="loggingFeature" class="org.apache.cxf.feature.LoggingFeature"/>

  <bean name="fedoraJaxbProvider" class="org.apache.cxf.jaxrs.provider.JAXBElementProvider">
    <property name="enableBuffering" value="true"/>
  </bean>

  <util:map id="marshallerProperties">
    <entry key="com.sun.xml.bind.xmlHeaders" value="${escidoc-core.xslt.std}"/>
  </util:map>

  <bean name="escidocJaxbProvider" class="org.escidoc.core.util.xml.internal.EsciDocJAXBElementProvider">
    <property name="marshallerProperties" ref="marshallerProperties"/>
    <property name="enableBuffering" value="true"/>
    <property name="catalogLocation" value="classpath:/xsd/catalog.xml"/>
    <property name="schemaLocations">
      <list>
        <value>classpath:/xsd/add-selectors.xsd</value>
        <value>classpath:/xsd/aggregation-definition.xsd</value>
        <value>classpath:/xsd/aggregation-definition-list.xsd</value>
        <value>classpath:/xsd/assign-pid-task-param.xsd</value>
        <value>classpath:/xsd/common-types.xsd</value>
        <value>classpath:/xsd/components.xsd</value>
        <value>classpath:/xsd/container.xsd</value>
        <value>classpath:/xsd/container-list.xsd</value>
        <value>classpath:/xsd/content-model.xsd</value>
        <value>classpath:/xsd/content-relation.xsd</value>
        <value>classpath:/xsd/content-streams.xsd</value>
        <value>classpath:/xsd/context-list.xsd</value>
        <value>classpath:/xsd/context.xsd</value>
        <value>classpath:/xsd/cs-xacml-schema-context-01.xsd</value>
        <value>classpath:/xsd/cs-xacml-schema-policy-01.xsd</value>
        <value>classpath:/xsd/delete-objects-task-param.xsd</value>
        <value>classpath:/xsd/diagnostics.xsd</value>
        <value>classpath:/xsd/Event-v1-1.xsd</value>
        <value>classpath:/xsd/exception.xsd</value>
        <value>classpath:/xsd/grants.xsd</value>
        <value>classpath:/xsd/id-set-task-param.xsd</value>
        <value>classpath:/xsd/index-configuration.xsd</value>
        <value>classpath:/xsd/item-list.xsd</value>
        <value>classpath:/xsd/item.xsd</value>
        <value>classpath:/xsd/jhove.xsd</value>
        <value>classpath:/xsd/md-records.xsd</value>
        <value>classpath:/xsd/members-task-param.xsd</value>
        <value>classpath:/xsd/optimistic-locking-task-param.xsd</value>
        <value>classpath:/xsd/organizational-unit-list.xsd</value>
        <value>classpath:/xsd/organizational-unit-path-list.xsd</value>
        <value>classpath:/xsd/organizational-unit-ref.xsd</value>
        <value>classpath:/xsd/organizational-unit-successors.xsd</value>
        <value>classpath:/xsd/organizational-unit.xsd</value>
        <value>classpath:/xsd/parents.xsd</value>
        <value>classpath:/xsd/pdp-requests.xsd</value>
        <value>classpath:/xsd/pdp-results.xsd</value>
        <value>classpath:/xsd/permission-filter.xsd</value>
        <value>classpath:/xsd/predicate-list.xsd</value>
        <value>classpath:/xsd/preprocessing-information.xsd</value>
        <value>classpath:/xsd/properties.xsd</value>
        <value>classpath:/xsd/reindex-task-param.xsd</value>
        <value>classpath:/xsd/relation-task-param.xsd</value>
        <value>classpath:/xsd/relations.xsd</value>
        <value>classpath:/xsd/release.xsd</value>
        <value>classpath:/xsd/remove-selectors.xsd</value>
        <value>classpath:/xsd/report-definition-list.xsd</value>
        <value>classpath:/xsd/report-definition.xsd</value>
        <value>classpath:/xsd/report-parameters.xsd</value>
        <value>classpath:/xsd/report.xsd</value>
        <value>classpath:/xsd/result.xsd</value>
        <value>classpath:/xsd/revoke-grant-task-param.xsd</value>
        <value>classpath:/xsd/revoke-grants-task-param.xsd</value>
        <value>classpath:/xsd/role-list.xsd</value>
        <value>classpath:/xsd/role.xsd</value>
        <value>classpath:/xsd/scope-list.xsd</value>
        <value>classpath:/xsd/scope.xsd</value>
        <value>classpath:/xsd/set-definition.xsd</value>
        <value>classpath:/xsd/srw-extra-data.xsd</value>
        <value>classpath:/xsd/srw-types.xsd</value>
        <value>classpath:/xsd/staging-file.xsd</value>
        <value>classpath:/xsd/status-task-param.xsd</value>
        <value>classpath:/xsd/struct-map.xsd</value>
        <value>classpath:/xsd/structural-relations.xsd</value>
        <value>classpath:/xsd/tme-request.xsd</value>
        <value>classpath:/xsd/update-password-task-param.xsd</value>
        <value>classpath:/xsd/user-account-attributes.xsd</value>
        <value>classpath:/xsd/user-account-preferences.xsd</value>
        <value>classpath:/xsd/user-account-list.xsd</value>
        <value>classpath:/xsd/user-account.xsd</value>
        <value>classpath:/xsd/user-group-list.xsd</value>
        <value>classpath:/xsd/user-group.xsd</value>
        <value>classpath:/xsd/version-history.xsd</value>
        <value>classpath:/xsd/version.xsd</value>
        <value>classpath:/xsd/xcql.xsd</value>
        <value>classpath:/xsd/xlink.xsd</value>
        <value>classpath:/xsd/xml.xsd</value>
      </list>
    </property>
  </bean>

  <bean id="cachedOutputStreamMessageBodyReader"
        class="org.escidoc.core.util.xml.internal.DatastreamMessageBodyReader"/>

  <bean id="cachedOutputStreamMessageBodyWriter"
        class="org.escidoc.core.util.xml.internal.DatastreamMessageBodyWriter"/>

</beans>